{% extends "base.html" %}

{% block content %}
<div class="container mx-auto max-w-7xl px-4 py-10">
    <h1 class="text-4xl font-bold text-up-secondary mb-8">Dashboard Overview</h1>
    
    {# Staff Check - Optional but good practice #}
    {% if not request.user.is_staff %}
        <div class="p-4 bg-red-100 text-red-700 rounded-lg mb-6">
            Access Denied: You must be a staff member to view the dashboard.
        </div>
    {% endif %}

    {# KPI Cards Grid #}
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">

        {# Card 1: Pending Reservations Today #}
        <div class="bg-white p-6 rounded-xl shadow-lg border-l-4 border-up-primary">
            <p class="text-sm font-medium text-gray-500">Pending Reservations Today</p>
            <p class="text-4xl font-extrabold text-up-secondary mt-1">{{ today_reservations }}</p>
            <a href="{% url 'dashboard:reservation_list' %}" class="text-sm text-up-primary hover:underline mt-2 inline-block">View Reservations</a>
        </div>

        {# Card 2: Total Sales Today #}
        <div class="bg-white p-6 rounded-xl shadow-lg border-l-4 border-green-500">
            <p class="text-sm font-medium text-gray-500">Total Sales Today</p>
            {# Uses the aggregated total_sales_today from the view #}
            <p class="text-4xl font-extrabold text-green-600 mt-1">KShs {{ total_sales_today|floatformat:2 }}</p>
            <a href="{% url 'dashboard:order_list' %}" class="text-sm text-green-500 hover:underline mt-2 inline-block">View Orders</a>
        </div>

        {# Card 3: Total Orders Today #}
        <div class="bg-white p-6 rounded-xl shadow-lg border-l-4 border-blue-500">
            <p class="text-sm font-medium text-gray-500">Orders Placed Today</p>
            <p class="text-4xl font-extrabold text-up-secondary mt-1">{{ total_orders_today }}</p>
            <a href="{% url 'dashboard:order_list' %}" class="text-sm text-blue-500 hover:underline mt-2 inline-block">View Orders</a>
        </div>
    </div>

    {# You can add more dashboard elements here, such as charts or recent activity lists #}

</div>
{% endblock content %}